(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1830:function(e,t,n){Promise.resolve().then(n.t.bind(n,4080,23)),Promise.resolve().then(n.t.bind(n,4671,23)),Promise.resolve().then(n.bind(n,8726)),Promise.resolve().then(n.bind(n,4430)),Promise.resolve().then(n.bind(n,5945)),Promise.resolve().then(n.t.bind(n,2121,23))},3657:function(e,t,n){"use strict";n.d(t,{oL:function(){return l},bt:function(){return d},aK:function(){return s},eb:function(){return i},lB:function(){return u},k7:function(){return o},fw:function(){return f},ot:function(){return w}});var r,l,a=n(4042);let o=e=>e.global.windowsOpen,i=(0,a.P1)(o,e=>t=>e.some(e=>e.window===t)),u=(0,a.P1)(o,e=>t=>e.find(e=>e.window===t)),d=e=>e.global.isLoading,s=(0,a.P1)(o,e=>t=>e.some(e=>e.window===t)&&e[e.length-1].window===t);(r=l||(l={})).Deposit="Deposit",r.Swap="Swap",r.Transfer="Transfer",r.Referral="Referral",r.AddWallet="AddWallet",r.Networks="Networks",r.WalletsList="WalletsList",r.AddToken="AddToken",r.TransactionsHistory="TransactionsHistory",r.WalletDetails="WalletDetails",r.TransactionDetails="TransactionDetails",r.ImportWallet="ImportWallet",r.CreateWallet="CreateWallet",r.PrepareTransfer="PrepareTransfer",r.ConfirmTransfer="ConfirmTransfer",r.ConfirmSwap="ConfirmSwap",r.SelectFromToken="SelectFromToken",r.SelectToToken="SelectToToken",r.TokenDetails="TokenDetails",r.TokenInfo="TokenInfo";let c=(0,n(2351).oM)({name:"global",initialState:{isLoading:!1,windowsOpen:[]},reducers:{setLoading:(e,t)=>{e.isLoading=t.payload},addWindow:(e,t)=>{e.windowsOpen.some(e=>e.window===t.payload.window)||(e.windowsOpen=[...e.windowsOpen,t.payload])},removeWindow:(e,t)=>{e.windowsOpen=e.windowsOpen.filter(e=>e.window!==t.payload)},removeAllWindows:e=>{e.windowsOpen=[]},removeLastWindow:e=>{e.windowsOpen.pop()}}}),{reducer:w}=c,{actions:f}=c},4999:function(e,t,n){"use strict";n.d(t,{fK:function(){return u}});var r=n(385),l=n(2433),a=n(3657),o=n(1101);let i=(0,n(2351).hg)("wallet/updateData",async(e,t)=>{let{getState:n,dispatch:r}=t,a=n().wallet.selectedWallet;if(a)try{let e=await r(u.endpoints.getWalletSilent.initiate(a.id)).unwrap();e.data&&r(l.vB.setSelectedWallet(e.data))}catch(e){console.error("Failed to update wallet data:",e)}}),u=o.h.injectEndpoints({endpoints:e=>({getWallet:e.query({query:e=>({url:"/wallets/wallet/".concat(e)}),onQueryStarted:async(e,t)=>{let{dispatch:n,queryFulfilled:o,getState:i}=t;try{var u;n(a.fw.setLoading(!0));let e=await o,t=(0,r.KR)(i());(null==e?void 0:null===(u=e.data)||void 0===u?void 0:u.data)&&(n(l.vB.setSelectedWallet(e.data.data)),t||n(l.vB.setSelectedNetwork(e.data.data.network)))}finally{n(a.fw.setLoading(!1))}}}),getWalletSilent:e.query({query:e=>({url:"/wallets/wallet/".concat(e)}),onQueryStarted:async(e,t)=>{let{dispatch:n,queryFulfilled:r}=t;try{var a;let e=await r;(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.data)&&n(l.vB.setSelectedWallet(e.data.data))}catch(e){console.error("Error in getWalletSilentUpdate:",e)}}}),getTokenTransactions:e.query({query:e=>({url:"/wallets/token-transactions",params:e})}),getWallets:e.query({query:()=>({url:"/wallets/list"})}),transfer:e.mutation({query:e=>({url:"/wallets/transfer",method:"POST",body:e})}),createWallet:e.mutation({query:e=>({url:"/wallets/create",method:"POST",body:e})}),importWallet:e.mutation({query:e=>({url:"/wallets/import",method:"POST",body:e})}),deleteWallet:e.mutation({query:e=>({url:"/wallets/delete",method:"DELETE",body:e})}),getTokenInfo:e.query({query:e=>({url:"/wallets/token/info",params:e})}),getTokenPrice:e.query({query:e=>({url:"/wallets/token/price",params:e})}),addWalletToken:e.mutation({query:e=>({url:"/wallets/token/add",method:"POST",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:r}=t;try{await r,await n(i())}catch(e){console.error("Failed to add wallet token:",e)}}}),deleteWalletToken:e.mutation({query:e=>({url:"/wallets/token/delete",method:"DELETE",body:e}),async onQueryStarted(e,t){let{dispatch:n,queryFulfilled:r}=t;n(l.vB.setIsLoading(!0));try{await r,n(l.vB.removeWalletToken(e.token_id))}finally{n(l.vB.setIsLoading(!1))}}}),getWalletTransactions:e.query({query:e=>({url:"/wallets/transactions",params:e})}),swap:e.mutation({query:e=>({url:"/wallets/swap",method:"POST",body:e})}),getTokenExtendedInfo:e.query({query:e=>({url:"/wallets/token/extended-info",params:e})}),estimateGas:e.mutation({query:e=>({url:"/wallets/estimate-swap-fee",method:"POST",body:e})}),getHistoricalQuotes:e.query({query:e=>({url:"/wallets/token/historical-quotes",params:e})})})}),{useGetWalletQuery:d,useGetWalletsQuery:s,useTransferMutation:c,useCreateWalletMutation:w,useImportWalletMutation:f,useDeleteWalletMutation:p,useGetTokenInfoQuery:v,useGetTokenPriceQuery:T,useAddWalletTokenMutation:y,useGetWalletTransactionsQuery:m,useSwapMutation:k,useLazyGetTokenPriceQuery:S,useGetTokenExtendedInfoQuery:g,useEstimateGasMutation:W,useGetHistoricalQuotesQuery:h,useLazyGetHistoricalQuotesQuery:E,useDeleteWalletTokenMutation:P,useGetTokenTransactionsQuery:q}=u},4015:function(e,t,n){"use strict";n.d(t,{Zc:function(){return i},LN:function(){return s},iU:function(){return d},Vc:function(){return c.Vc},KR:function(){return c.KR},wg:function(){return c.wg},wR:function(){return c.wR},MX:function(){return c.MX},vB:function(){return w.vB},fK:function(){return f.fK},eI:function(){return w.eI}});var r,l,a,o,i,u,d,s,c=n(385);(r=i||(i={})).SOL="Solana",r.TON="The Open Network",r.ETH="Ethereum",r.BSC="Binance Smart Chain",(l=u||(u={})).IMPORTED="IMPORTED",l.GENERATED="GENERATED",(a=d||(d={})).SWAP="SWAP",a.DEPOSIT="DEPOSIT",a.TRANSFER="TRANSFER",(o=s||(s={})).FAILED="FAILED",o.PENDING="PENDING",o.SUCCESS="SUCCESS";var w=n(2433),f=n(4999)},385:function(e,t,n){"use strict";n.d(t,{KR:function(){return o},MX:function(){return r},Vc:function(){return l},wR:function(){return a},wg:function(){return i}});let r=e=>e.wallet.wallets,l=e=>e.wallet.isLoading,a=e=>e.wallet.selectedWallet,o=e=>e.wallet.selectedNetwork,i=e=>e.wallet.selectedToken},2433:function(e,t,n){"use strict";n.d(t,{eI:function(){return u},vB:function(){return i}});var r=n(4832),l=n(2351),a=n(2649);let o=(0,l.oM)({name:"wallet",initialState:{wallets:[],isLoading:!1,selectedWallet:void 0,selectedNetwork:void 0,selectedToken:void 0},reducers:{setWallets(e,t){e.wallets=t.payload},setIsLoading(e,t){e.isLoading=t.payload},setSelectedWallet(e,t){e.selectedWallet=t.payload,a.Z.set(r.nV,t.payload.id)},setSelectedNetwork(e,t){e.selectedNetwork=t.payload,a.Z.set(r.Ac,t.payload)},setSelectedToken(e,t){e.selectedToken=t.payload},clearSelectedToken(e){e.selectedToken=void 0},removeWalletToken(e,t){e.selectedWallet&&(e.selectedWallet.tokens=e.selectedWallet.tokens.filter(e=>e.id!==t.payload))}}}),{actions:i}=o,{reducer:u}=o},1101:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var r=n(6074),l=n(8507);let a=()=>{var e,t;return(null===(t=window.Telegram)||void 0===t?void 0:null===(e=t.WebApp)||void 0===e?void 0:e.initData)||null},o=()=>{var e,t,n,r;return(null===(r=window.Telegram)||void 0===r?void 0:null===(n=r.WebApp)||void 0===n?void 0:null===(t=n.initDataUnsafe)||void 0===t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)||null},i=()=>{var e,t,n,r;return(null===(r=window.Telegram)||void 0===r?void 0:null===(n=r.WebApp)||void 0===n?void 0:null===(t=n.initDataUnsafe)||void 0===t?void 0:null===(e=t.user)||void 0===e?void 0:e.username)||null},u=()=>{var e,t,n,r;return(null===(r=window.Telegram)||void 0===r?void 0:null===(n=r.WebApp)||void 0===n?void 0:null===(t=n.initDataUnsafe)||void 0===t?void 0:null===(e=t.user)||void 0===e?void 0:e.language_code)||null},d=(0,r.ni)({baseUrl:"https://cryptoswaptg.ru/v1",credentials:"include",prepareHeaders:e=>{e.set("Content-Type","application/json");let t=a();t&&(e.set("X-Telegram-Init-Data",t),e.set("Authorization","tma ".concat(t)));let n=o();return n&&e.set("X-Telegram-ID",n.toString()),e}}),s=async(e,t,n)=>{let r=await d(e,t,n);if(r.error&&(401===r.error.status||403===r.error.status)){let l=o(),a=i(),s=u();l&&((await d({url:"/users/profile?telegram_id=".concat(l,"&username=").concat(a,"&language_code=").concat(s),method:"GET"},t,n)).data?r=await d(e,t,n):console.error("Failed to refresh session"))}return r},c=(0,l.LC)({baseQuery:s,reducerPath:"api",tagTypes:["User","Workspace","Ticker","Chart","Quote","Stock","Event"],refetchOnMountOrArgChange:!0,endpoints:e=>({})})},4832:function(e,t,n){"use strict";n.d(t,{Ac:function(){return a},bq:function(){return r},nV:function(){return l}});let r="_auth.telegram_id",l="_app.wallet",a="_app.network"},4430:function(e,t,n){"use strict";n.r(t),n.d(t,{createReduxStore:function(){return s},rootReducer:function(){return d},useAppDispatch:function(){return c}});var r=n(3657),l=n(2351),a=n(4015),o=n(1444),i=n(6804),u=n(1101);let d=(0,i.UY)({global:r.ot,wallet:a.eI,[u.h.reducerPath]:u.h.reducer});function s(e){return(0,l.xC)({reducer:d,preloadedState:e,middleware:e=>e().concat(u.h.middleware)})}let c=()=>(0,o.I0)()},5945:function(e,t,n){"use strict";n.r(t),n.d(t,{StoreProvider:function(){return o}});var r=n(7437),l=n(4430),a=n(1444);let o=e=>{let t=(0,l.createReduxStore)();return(0,r.jsx)(a.zt,{store:t,children:null==e?void 0:e.children})}},2121:function(){}},function(e){e.O(0,[852,255,555,971,23,744],function(){return e(e.s=1830)}),_N_E=e.O()}]);